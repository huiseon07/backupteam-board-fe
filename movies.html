<!-- 데이터값이 배열 형태로 저장되어 있음 -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- <link rel="stylesheet" href="https://unpkg.com/mvp.css@1.12/mvp.css" /> -->
    <title>Document</title>
  </head>
  <body>
    <h1>영화 목록 보기</h1>
    <a href="register.html"> 영화 등록하러 가기 </a> <br />
    <table id="table" class="table" border="1">
      <thead>
        <tr>
          <th>ID</th>
          <th>제목</th>
          <th>등록자</th>
          <th>조회수</th>
          <th>등록일</th>
        </tr>
      </thead>
      <!-- <tbody id="movies"></tbody> -->
      <tbody id="movies">
        <!-- <tr>
          <th>1</th>
          <th>Misérables, Les</th>
          <th>Trix Hannaby</th>
          <th>23</th>
          <th>2022-08-11 00:40:32</th>
        </tr>
        <tr>
          <th>3</th>
          <th>Captain Ron</th>
          <th>Trix Hannaby</th>
          <th>1</th>
          <th>2022-08-14 18:09:47</th>
        </tr>
        <tr>
          <th>4</th>
          <th>Siberia</th>
          <th>Jimmy Weld</th>
          <th>37</th>
          <th>2022-02-08 02:44:29</th>
        </tr>
        <tr>
          <th>5</th>
          <th>Girl, The</th>
          <th>Meredith Spendlove</th>
          <th>82</th>
          <th>2022-08-29 00:02:21</th>
        </tr>
        <tr>
          <th>6</th>
          <th>44 Minutes: The North Hollywood Shoot-Out</th>
          <th>Kimmy Hulks</th>
          <th>2</th>
          <th>2022-12-06 20:33:12</th>
        </tr> -->
      </tbody>
    </table>
  </body>
  <!-- <script>
    axios({
      method: "get", // 통신 방식
      url: "http://localhost:9000/movies", // 서버
    }).then(function (response) {
      const movies = response.data;
      let temp = ``;

      for (let i = 0; i < movies.length; i++) {
        temp += `
          <tr>
            <td>${movies[i].id}</td>
            <td>${movies[i].movie_title}</td>
            <td>${movies[i].name}</td>
            <td>${movies[i].hit_count}</td>
            <td>${movies[i].created_at}</td>
          </tr>
        `;
      }
      document.getElementById("movies").innerHTML = temp;
    });
  </script> -->
  <script>
    fetch("http://localhost:9000/movies")
      .then((response) => response.json())
      .then((movies) => {
        const html = movies.map((movie) => {
          return `
          <tr>
            <td>${movie.id}</td>
            <td> <a href='movie.html?id=${movie.id}'>${movie.movie_title}</td>
            <td>${movie.name}</td>
            <td>${movie.hit_count}</td>
            <td>${movie.created_at}</td>
          </tr>`;
        });
        document.getElementById("movies").innerHTML = html.join("");
      });
  </script>
</html>
